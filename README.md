# 智慧园区项目

智慧园区，简单来说，就是应⽤了现代信息技术来管理和优化园区运作的⾼科技园区。这种园区通过集成物联⽹、
⼤数据、⼈⼯智能等技术，提⾼了管理效率，节约能源，增强安全保障，改善环境质量，从⽽为居住、⼯作的⼈提
供了⼀个更加舒适、智能和便捷的空间。
想象⼀下你进⼊⼀个园区，所有的设施——如照明、安全监控、能源使⽤等——都是⾃动控制的。⽐如，园区内的
路灯能根据天⽓和周围亮度⾃动调节亮度；园区的能源系统会根据实际⽤电情况⾃动调整，以节约电能和降低成
本；安全系统能通过智能相机监控园区安全，甚⾄能⾃动识别可疑⾏为并及时报警。


我们的项目基于React、React-Router、RTK、axios、echarts、
ant design、TypeScript、webpack开发。按照企业级标准和规范开发
,包含前后端对接、权限控制、性能优化、组件和插件封装等核心功能
。并部署上线。

项目亮点
1.使用echarts实现园区内数据可视化
2.实现了不同角色页面访问的权限控制
3.封装了高阶组件,实现了按钮级别的权限控制
4.使用了懒加载、useMemo、React.memo、useCallback等优化了项目性能
5.独立封装了导出excel插件,可直接导出表格数据到本地,并实现表格的跨页选择
6.实现了列表缓存功能,并可根据条件调整缓存时机
7.封装了复用组件,一次封装,多次使用
8.封装了自定义hooks,极大的提高了开发效率
9.独立部署项目上线,并自主配置nginx,解决路由刷新404的问题
10.多处使用了递归、闭包、高阶组件解决项目难题


项目中做起来比较难的点
在做项目的过程中,其实还是遇到了挺多问题,但后来基本都通过自已反复的验证和查询资料而解决,让我印象比较深刻的点,

第一个就是权限控制的问题,我们公司的项目是后端根据用户的登录信息,返回账号的菜单数据,但是菜单数据和我们前端所需要渲染的路由菜单需要的结构是不一样的,尤其是在渲染菜单的时候还包含图标组件,它是一个antd的组件标签,而后端返回的是字符串。我通过设置了图标映射表解决的这个问题,然后自己封装了菜单处理函数,多次递火日判断和循环,将后端返回的菜单数据处理成前端所需格式。又通过动态添加路由的方式,将路由表添加到路由实例中,但是这个路由表的加载又存在异步的问题,有可能进入页面的时候路由数据还5
没返回,我又通过将useEffect依赖项设置token的方式,当登录成功后重新渲染路由实例的问题而解决。另外我们的项目还涉及了按钮级别的权限,我封装了一个全局的高阶组件,用于对每个按钮进行权限判断后再渲染,因为高阶组件他是接受一个组件当参数的,但是我的,但是我的 函数要求传入用户拥有的权限和当前按钮所需的权限,所有我写了个闭包结沟,外层又嵌套一个函数,接受权限数据,返回高阶组件,接受组件当参数。

第二个就是缓存控制问题,合同列表进入详情页面,返回的时候要求数据不能刷新,但是返回的时候会触发useEffect重新渲染,所以这里我选择将页面的数据存储到redux中,然后从详情页返回的时候通过路由传参携带一个标记,列表页面通过判断标记来确定是不是从详情页面返回,如果是从详情页返回就读取redux数据,否则就重新加载。但是这个时候有可能客户直接输入链接先进入详情页,这个时候在列表页面也会先读取redux中的数据,这是不合理的,所有我又多设置了条件判断如果redux没有数据的情况也要去重新加载。

第三个是导出表格数据到本地excel问题,使用了XLSX插件,并全局封装了,可以实现勾选任意表格点下载就可以实现导出excel数据到本 地功能,并且实现了表格的跨页选择,翻页重新发送请求之前勾选的数据不丢失




2025.07.14
与vue的异同:
样式隔离：
vue  ———— scoped
react———— css module / Styled Components /BEM


React18 + redux(RTK) + react-router v6.4 + TypeScript + antd + webpack+ echarts + create-react-app

